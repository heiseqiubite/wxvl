#  【已复现】ComfyUI-Manager 远程代码执行漏洞（CVE-2025-67303）  
 长亭安全应急响应中心   2026-01-08 10:47  
  
![](https://mmbiz.qpic.cn/sz_mmbiz_png/FOh11C4BDicR42FUicYHLn0MUmhnuFsclibRlvsv6O5MIiaySsKQfT4d0iaThwbh5iaoTLQ5TNstLOzvb2oDau1Jzdlg/640?wx_fmt=png&from=appmsg "")  
  
  
ComfyUI 是一款流行的基于节点的 Stable Diffusion 图形用户界面，广泛应用于 AI 图像生成工作流的构建和执行。ComfyUI-Manager 是 ComfyUI 的扩展管理器插件，用于简化自定义节点、模型和依赖项的安装管理。  
  
  
2026年1月，长亭安全应急响应中心监测到 ComfyUI-Manager 存在配置文件未授权访问漏洞（CVE-2025-67303）。经分析，未经身份验证的攻击者可利用该漏洞访问并篡改应用程序的配置，配合 Git URL 安装功能实现远程代码执行，利用难度较低，建议受影响的用户尽快修复。  
  
  
**漏洞描述**  
  
   
Description  
   
  
  
  
**0****1**  
  
**漏洞成因**  
  
CVE-2025-67303 是 ComfyUI-Manager 配置文件存储位置不当导致的安全缺陷。在 V3.38 之前的版本中，Manager 将其配置文件、快照和关键数据存储在 user/default/ComfyUI-Manager/  
目录下。该目录属于 ComfyUI 的 default/  
用户数据目录，未受到系统级保护，可通过 Web API 直接访问。远程攻击者可通过 Web 接口直接访问和修改配置文件，篡改 security_level  
配置项，将安全级别从 normal  
降低至 weak  
，从而绕过安装限制，通过 Git URL   
安装功能实现远程代码执行  
。  
  
  
## 漏洞影响  
  
攻击者可在服务器上执行任意代码，可能导致服务器被完全控制、数据泄露或业务系统沦陷。  
  
  
**处置优先级：高**  
  
漏洞类型：  
远程代码执行  
  
**漏洞危害等级：**  
高  
  
**触发方式：**  
网络远程  
  
**权限认证要求：**  
无需权限  
  
**系统配置要求：**  
默认配置  
  
**用户交互要求：**  
无需用户交互  
  
**利用成熟度：**  
POC/EXP 已公开  
  
**修复复杂度：**  
低，  
官方已提供修复方案  
  
  
  
  
  
**影响版本**  
  
   
Affects  
   
  
  
  
**02**  
```
```  
  
**解决方案**  
  
   
Solution  
   
  
  
  
**03**  
  
##   
  
## 升级修复方案  
  
  
1、升级 ComfyUI-Manager 至 V3.38 或更高版本   
  
2、升级 ComfyUI 至 v0.3.76 或更高版本（需要 System User Protection API 支持）  
  
安全迁移说明：  
  
V3.38 版本将配置文件迁移至受保护的系统路径：  
- 旧路径：user/default/ComfyUI-Manager/  
（不安全，可被 Web API 访问）  
  
- 新路径：user/__manager/  
（受 ComfyUI 系统保护，外部无法访问）  
  
迁移过程：  
1. 仅 config.ini  
会自动迁移  
  
1. 如安全级别低于 normal  
，将自动提升至 normal  
  
1. 旧数据目录备份至 user/__manager/.legacy-manager-backup/  
  
1. 快照数据（snapshots/  
）因可能已被篡改，需手动验证后复制  
  
  
  
## 临时缓解方案避免使用 --listen 0.0.0.0等允许外部连接的参数启动 ComfyUI 手动检查 user/default/ComfyUI-Manager/config.ini，确认 security_level未被篡改 审查已安装的自定义节点，删除可疑的未知来源扩展 使用防火墙限制 ComfyUI Web 接口的访问来源安全级别说明级别允许操作strong仅允许更新 ComfyUI，阻止所有扩展安装normal允许安装/更新/删除已注册的自定义节点和模型（推荐）normal-在 normal基础上，允许通过 Git URL 或 pip 安装（仅限本地访问）weak允许所有操作，包括远程连接的 Git URL 安装（不推荐）漏洞复现Reproduction                                       04产品支持 Support 05云图：默认支持该产品的指纹识别，同时支持该漏洞的PoC检测洞鉴：默认支持该产品的指纹识别，预计2026.01.08支持该漏洞的自定义PoC无锋：默认支持该产品的指纹识别，预计2026.01.08支持该漏洞的PoC检测时间线 Timeline 062026年1月8日 长亭安全应急响应中心发布通告参考资料：[1].https://github.com/Comfy-Org/ComfyUI-Manager/blob/main/docs/en/v3.38-userdata-security-migration.md  
  
  
**长亭应急响应服务**  
  
  
  
  
全力进行产品升级  
  
及时将风险提示预案发送给客户  
  
检测业务是否受到此次漏洞影响  
  
请联系长亭应急服务团队  
  
7*24小时，守护您的安全  
  
  
第一时间找到我们：  
  
邮箱：support@chaitin.com  
  
